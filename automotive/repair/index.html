<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8" /> <meta http-equiv="X-UA-Compatible" content="IE=edge;chrome=1" /> <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" /> <title>Corruption-Proof Auto Repair Checklist | Planetary Restoration Archive</title> <!-- SEO --> <meta name="description" content="A universally translatable, step-by-step checklist to corruption-proof your automotive repair experience. Offline-ready, with IndexedDB, Habitica export, and optional WebLLM guidance." /> <meta name="keywords" content="auto repair, anti-corruption checklist, mechanic, transparency, habitica, indexeddb, offline, universally translatable" /> <link rel="canonical" href="https://planetaryrestorationarchive.com/ref/crypto/sol/custom/gpt/rare/peace/engineer/hybrid" /> <!-- Open Graph --> <meta property="og:title" content="Corruption-Proof Auto Repair Checklist" /> <meta property="og:description" content="Use this plain-language, globally portable checklist to keep car repairs honest. Save progress offline and export to Habitica." /> <meta property="og:type" content="website" /> <meta property="og:image" content="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='1200' height='630'><rect fill='%23000' width='1200' height='630'/><text x='50%' y='50%' fill='%23fff' font-size='58' font-family='sans-serif' text-anchor='middle' dominant-baseline='middle'>Corruption-Proof Auto Repair</text></svg>" /> <!-- Twitter Card --> <meta name="twitter:card" content="summary_large_image" /> <meta name="twitter:title" content="Corruption-Proof Auto Repair Checklist" /> <meta name="twitter:description" content="Plain-language, globally portable. Offline-ready. Export to Habitica." /> <!-- PWA (standalone-friendly without external files) --> <meta name="theme-color" content="#071018" /> <link rel="manifest" href="data:application/manifest+json,{&quot;name&quot;:%22Corruption-Proof Auto Repair Checklist%22,%22short_name%22:%22AutoCheck%22,%22start_url%22:%22.%2Findex.html%22,%22display%22:%22standalone%22,%22background_color%22:%22#000000%22,%22theme_color%22:%22#071018%22,%22icons%22:[{%22src%22:%22data:image/png;base64,iVBORw0KGgo=%22,%22sizes%22:%22192x192%22,%22type%22:%22image/png%22}]}"> <!-- Structured Data: schema.org + presentation schema reference --> <script type="application/ld+json"> { "@context": [ "https://schema.org", "https://planetaryrestorationarchive.com/ref/crypto/sol/custom/gpt/rare/peace/engineer/hybrid" ], "@type": "HowTo", "name": "Corruption-Proof Auto Repair Checklist", "description": "A universally translatable checklist to reduce fraud and increase transparency during car repairs. Offline-first with IndexedDB, Habitica export, and optional on-device WebLLM.", "step": [ {"@type":"HowToStep","name":"Know your vehicle","text":"Record make, model, year, mileage, VIN. Keep digital + paper copies."}, {"@type":"HowToStep","name":"List symptoms","text":"Write what you observe (noises, leaks, smells, lights) — not diagnoses."}, {"@type":"HowToStep","name":"Check baseline prices","text":"Compare labor rates and parts from multiple sources."}, {"@type":"HowToStep","name":"Bring a witness","text":"A calm second person or timestamped log deters misconduct."}, {"@type":"HowToStep","name":"Document everything","text":"Photos of odometer, tires, visible issues with date/time stamps."}, {"@type":"HowToStep","name":"Written estimates","text":"Require printed/emailed estimate with fees, parts, labor hours, taxes."}, {"@type":"HowToStep","name":"Ask for old parts","text":"Request to keep replaced parts for verification."}, {"@type":"HowToStep","name":"Verify certifications","text":"Photograph business license and trade accreditations."}, {"@type":"HowToStep","name":"Mark parts","text":"Discreet washable marks on easily replaced items."}, {"@type":"HowToStep","name":"Observe bay","text":"Clean, organized workspaces correlate with good practice."}, {"@type":"HowToStep","name":"Authorize in writing","text":"For extras: request photo/video, written reason, updated estimate."}, {"@type":"HowToStep","name":"Keep time logs","text":"Record drop-off and pickup; watch inflated labor hours."}, {"@type":"HowToStep","name":"No blank receipts","text":"Sign only final, itemized invoices."}, {"@type":"HowToStep","name":"Note brands/origin","text":"Prefer OEM or high-quality aftermarket; record serials when possible."}, {"@type":"HowToStep","name":"Immediate test-drive","text":"Verify symptoms are gone within 24 hours."}, {"@type":"HowToStep","name":"Check mileage","text":"Small differences normal; large jumps are suspicious."}, {"@type":"HowToStep","name":"Inspect old parts","text":"Compare to claims; photograph and label."}, {"@type":"HowToStep","name":"Keep paperwork","text":"Save estimates, invoices, warranty, messages."}, {"@type":"HowToStep","name":"Leave factual review","text":"Note honesty, clarity, turnaround time."} ], "tool": ["Camera/phone", "Notebook", "Marker/sticker", "Dashcam (where legal)"] } </script> <style> :root{ --bg:#03060b; --fg:#e9f1ff; --muted:#9bb1c9; --accent:#66e3ff; --ok:#77ff9f; --warn:#ffd166; --bad:#ff6b6b; --card:rgba(10,18,28,0.72); --glass:backdrop-filter: blur(8px) saturate(110%); } *{box-sizing:border-box} html,body{height:100%} body{ margin:0; background:radial-gradient(1200px 800px at 70% 10%, #0a1422 0%, #03060b 60%, #000 100%); color:var(--fg); font:16px/1.4 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,"Helvetica Neue",Arial,"Apple Color Emoji","Segoe UI Emoji"; overflow-x:hidden; } /* Photorealistic starfield canvas behind everything */ #starfield{ position:fixed; inset:0; z-index:-2; background:#000; } /* A faint nebula overlay */ .nebula{ position:fixed; inset:-10% -10% 0 -10%; z-index:-1; pointer-events:none; background: radial-gradient(60% 40% at 15% 20%, rgba(32,92,255,.15), transparent 60%), radial-gradient(50% 35% at 80% 30%, rgba(255,96,204,.10), transparent 65%), radial-gradient(40% 30% at 60% 70%, rgba(0,255,214,.08), transparent 70%); filter: blur(20px) saturate(110%); } header{ display:flex; align-items:center; gap:14px; padding:18px 20px; position:sticky; top:0; background:linear-gradient(to bottom, rgba(3,6,11,.9), rgba(3,6,11,.6), transparent); border-bottom:1px solid rgba(255,255,255,0.06); backdrop-filter: blur(6px); } header h1{margin:0; font-size: clamp(18px, 3vw, 28px); letter-spacing:.2px} header .meta{margin-left:auto; font-size:12px; color:var(--muted)} header .btn{ border:1px solid rgba(255,255,255,.15); padding:8px 12px; border-radius:999px; cursor:pointer; background:rgba(255,255,255,.04); } main{max-width:980px; margin:24px auto 120px; padding:0 16px;} .card{ background:var(--card); border:1px solid rgba(255,255,255,.08); border-radius:16px; padding:18px; margin:16px 0; box-shadow: 0 10px 30px rgba(0,0,0,.35); --glass; } .intro{display:grid; grid-template-columns:1.2fr .8fr; gap:16px} @media (max-width:900px){ .intro{grid-template-columns:1fr} } .cta-row{display:flex; flex-wrap:wrap; gap:10px; margin-top:10px} .btn{ appearance:none; border:1px solid rgba(255,255,255,.12); background:#0b1624; color:var(--fg); padding:10px 14px; border-radius:12px; cursor:pointer; transition: transform .05s ease; } .btn:hover{transform:translateY(-1px)} .btn.acc{border-color: rgba(102,227,255,.45)} .btn.ok{border-color: rgba(119,255,159,.45)} .btn.warn{border-color: rgba(255,209,102,.45)} .btn.bad{border-color: rgba(255,107,107,.45)} .small{font-size:12px; color:var(--muted)} .checklist h2{margin:10px 0 4px} .step{display:flex; gap:10px; align-items:flex-start; padding:12px; border-bottom:1px dashed rgba(255,255,255,.08)} .step:last-child{border-bottom:none} .step input[type=checkbox]{width:22px; height:22px; margin-top:2px; cursor:pointer} .step .label{flex:1} .badge{display:inline-block; font-size:11px; padding:2px 8px; border-radius:999px; border:1px solid rgba(255,255,255,.15); color:var(--muted)} .flags{display:flex; gap:8px; flex-wrap:wrap} .flag{padding:4px 8px; border-radius:8px; background:rgba(255,255,255,.04); border:1px solid rgba(255,255,255,.10); font-size:12px} .grid2{display:grid; grid-template-columns:1fr 1fr; gap:16px} @media (max-width:800px){ .grid2{grid-template-columns:1fr} } footer{max-width:980px; margin:24px auto 60px; padding:0 16px; color:var(--muted)} a{color:var(--accent)} code,kbd{background:rgba(255,255,255,.06); padding:2px 6px; border-radius:6px; border:1px solid rgba(255,255,255,.12)} .sr{position:absolute !important; height:1px; width:1px; overflow:hidden; clip:rect(1px,1px,1px,1px)} </style> </head> <body> <canvas id="starfield" aria-hidden="true"></canvas> <div class="nebula" aria-hidden="true"></div> <header> <h1>Corruption-Proof Auto Repair Checklist</h1> <div class="meta">Offline-ready • IndexedDB • Habitica export • WebLLM optional</div> <button class="btn" id="btnPrint" title="Print / Save PDF">Print</button> </header> <main> <section class="intro card" role="region" aria-labelledby="intro-h"> <h2 id="intro-h" class="sr">Intro</h2> <div> <p><strong>Purpose:</strong> a plain-language, globally portable checklist to keep car repairs honest. Check items, save progress offline, export as a Habitica To-Do, and optionally get on-device AI coaching if WebLLM is available.</p> <div class="cta-row"> <button class="btn acc" id="btnExportHabitica">Export as Habitica To-Do</button> <button class="btn ok" id="btnExportText">Export as Plain Text</button> <button class="btn warn" id="btnReset">Reset Progress</button> <span class="small" id="statusMsg" role="status" aria-live="polite"></span> </div> </div> <div class="card" style="background:rgba(255,255,255,.03)"> <h3 style="margin-top:0">Quick Red Flags</h3> <div class="flags" aria-label="Red flags list"> <span class="flag">No written estimate</span> <span class="flag">Pressure / limited-time</span> <span class="flag">“Shop supplies” > 5%</span> <span class="flag">Replace everything</span> <span class="flag">No old parts returned</span> </div> <p class="small" style="margin-top:8px">Tip: record odometer &amp; take timestamped photos before drop-off.</p> </div> </section> <section class="grid2"> <!-- Habitica & WebLLM panes --> <div class="card" role="region" aria-labelledby="habitica-h"> <h3 id="habitica-h">Habitica (optional)</h3> <p class="small">Enter your <em>User ID</em> and <em>API Token</em> (find them in Habitica → Settings → API). Stored locally in IndexedDB.</p> <form id="habiticaForm" autocomplete="off"> <label class="small">User ID<br/><input id="habiticaUser" type="text" inputmode="text" placeholder="xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx" style="width:100%"></label><br/><br/> <label class="small">API Token<br/><input id="habiticaToken" type="password" placeholder="•••••••••••••••••••" style="width:100%"></label><br/><br/> <button class="btn ok" type="submit">Save Habitica Credentials</button> <span class="small" id="habiticaSaveMsg" style="margin-left:8px"></span> </form> </div> <div class="card" role="region" aria-labelledby="webllm-h"> <h3 id="webllm-h">On-Device WebLLM (optional)</h3> <p class="small">If <code>window.webllm</code> is available (served locally), you can ask quick questions about steps below. This page detects it automatically.</p> <div> <label class="small" for="llmPrompt">Ask:</label> <textarea id="llmPrompt" rows="3" style="width:100%" placeholder="e.g., ‘What should a written estimate include?’"></textarea> <div class="cta-row"> <button class="btn acc" id="btnLLM">Ask WebLLM</button> </div> <pre id="llmOut" aria-live="polite" class="small" style="white-space:pre-wrap; padding:10px; border:1px solid rgba(255,255,255,.12); border-radius:10px; background:rgba(255,255,255,.03); min-height:44px"></pre> <p class="small" id="llmStatus"></p> </div> </div> </section> <!-- CHECKLIST --> <section class="card checklist" role="region" aria-labelledby="list-h"> <h2 id="list-h" style="margin-top:0">Checklist</h2> <!-- Steps will be hydrated from JSON below; keeping accessible fallback text: --> <noscript> <p>Enable JavaScript to track and save your progress locally.</p> </noscript> <div id="steps"></div> <div class="cta-row" style="margin-top:12px"> <span class="badge">Progress: <span id="progressPct">0%</span></span> <span class="badge">Completed: <span id="progressCount">0</span>/<span id="progressTotal">0</span></span> </div> </section> <section class="card" role="note" aria-label="Ethical & Safety Notice"> <strong>Zero-Harm Notice:</strong> This guide is educational, not legal advice. Respect local laws (e.g., recording consent). Do not endanger workers or yourself. When in doubt, walk away from the transaction. </section> </main> <footer> <p class="small">Built offline-first. Data stays on your device via IndexedDB. Presentation schema: <a href="https://planetaryrestorationarchive.com/ref/crypto/sol/custom/gpt/rare/peace/engineer/hybrid" target="_blank" rel="noopener">PRA Hybrid</a>. © Steward-Architects for planetary flourishing.</p> </footer> <!-- Data model: steps (plain text for universal translation/localization) --> <script> const CHECKLIST_STEPS = [ {id:"s01", t:"Know your vehicle", d:"Record make, model, year, mileage, VIN. Keep digital + paper copies."}, {id:"s02", t:"List symptoms, not diagnoses", d:"Write what you observe (noises, leaks, smells, lights). Avoid saying what part is bad."}, {id:"s03", t:"Check baseline prices", d:"Compare labor rates and part costs from multiple sources."}, {id:"s04", t:"Bring a witness", d:"A calm second person or timestamped visit log deters misconduct."}, {id:"s05", t:"Document everything", d:"Take photos of odometer, tires, and visible issues with timestamps."}, {id:"s06", t:"Require written estimates", d:"Get printed/emailed estimate listing diagnostic fee, parts, labor, taxes/fees."}, {id:"s07", t:"Ask for old parts back", d:"Signals transparency; honest shops won’t object."}, {id:"s08", t:"Verify certifications & ID", d:"Photograph business license, insurance, trade accreditations."}, {id:"s09", t:"Mark parts discreetly", d:"Washable marks/stickers on easily swapped items."}, {id:"s10", t:"Observe the work area", d:"Clean, organized bays correlate with good practices."}, {id:"s11", t:"Authorize extras in writing", d:"Ask for photo/video proof, explanation, updated estimate."}, {id:"s12", t:"Keep time logs", d:"Note drop-off and pickup times; watch for inflated hours."}, {id:"s13", t:"No blank or open credit", d:"Sign only final, itemized invoices."}, {id:"s14", t:"Record brand & origin", d:"Prefer OEM or quality aftermarket; note serials if present."}, {id:"s15", t:"Immediate test drive", d:"Within 24h, verify symptoms are gone; watch for new issues."}, {id:"s16", t:"Check mileage", d:"Small differences are normal; big jumps are suspicious."}, {id:"s17", t:"Inspect kept parts", d:"Compare claims to what was removed; photograph & label."}, {id:"s18", t:"Save all paperwork", d:"Estimates, invoices, warranty, communications."}, {id:"s19", t:"Leave a factual review", d:"Note honesty, clarity, turnaround time."} ]; </script> <!-- IndexedDB, UI logic, Habitica + WebLLM hooks, starfield --> <script> (function(){ /* ---------- Photorealistic Starfield (canvas) ---------- */ const cvs = document.getElementById('starfield'); const ctx = cvs.getContext('2d', { alpha: true }); let W=0, H=0, stars=[], tails=[], last=0, focusX=0.5, focusY=0.4; function resize(){ W = cvs.width = window.innerWidth * devicePixelRatio; H = cvs.height = window.innerHeight * devicePixelRatio; } window.addEventListener('resize', resize, {passive:true}); resize(); function rand(n){ return Math.random()*n } function initStars(n=800){ stars.length=0; for(let i=0;i<n;i++){ const z = Math.random(); // depth 0..1 stars.push({ x: rand(W), y: rand(H), r: (0.6 + Math.random()*1.8) * (0.5 + 1.5*z), b: 0.7 + 0.3*Math.random(), tw: Math.random()*Math.PI*2, z }); } // rare bright streaks tails.length=0; for(let i=0;i<14;i++){ tails.push({ x: rand(W), y: rand(H), vx:(-0.5+Math.random())*0.08*devicePixelRatio, vy:(-0.5+Math.random())*0.08*devicePixelRatio, life: 2000+Math.random()*4000 }); } } initStars(Math.min(1200, Math.floor((window.innerWidth*window.innerHeight)/1200))); window.addEventListener('mousemove', (e)=>{ focusX = e.clientX / window.innerWidth; focusY = e.clientY / window.innerHeight; }, {passive:true}); function draw(now){ if(!last) last=now; const dt = now - last; last=now; ctx.clearRect(0,0,W,H); // parallax drift based on cursor focus const px = (focusX-0.5)*2, py=(focusY-0.5)*2; for(const s of stars){ const twinkle = 0.75 + 0.25*Math.sin(s.tw += 0.002 + s.z*0.004); const r = s.r * twinkle; const x = s.x + px*40*s.z, y = s.y + py*40*s.z; // subtle color temperature variation const hue = 200 + s.z*80 + Math.sin(s.tw*3)*10; const sat = 60 + s.z*20; const light = 70 + s.z*25*s.b; const grd = ctx.createRadialGradient(x,y,0,x,y,r*2); grd.addColorStop(0, `hsla(${hue},${sat}%,${light}%,0.95)`); grd.addColorStop(0.4, `hsla(${hue},${sat}%,${light-10}%,0.65)`); grd.addColorStop(1, `hsla(${hue},${sat}%,${light-30}%,0)`); ctx.fillStyle = grd; ctx.beginPath(); ctx.arc(x,y, r*2, 0, Math.PI*2); ctx.fill(); } // occasional drifting tails (shooting stars / cosmic dust) for(const t of tails){ t.x += t.vx * dt; t.y += t.vy * dt; t.life -= dt; if(t.life<=0 || t.x< -50 || t.y< -50 || t.x>W+50 || t.y>H+50){ t.x = rand(W); t.y = rand(H); t.vx = (-0.5+Math.random())*0.08*devicePixelRatio; t.vy = (-0.5+Math.random())*0.08*devicePixelRatio; t.life = 2000+Math.random()*4000; } const len = 60; const grad = ctx.createLinearGradient(t.x, t.y, t.x - t.vx*len, t.y - t.vy*len); grad.addColorStop(0, 'rgba(255,255,255,0.6)'); grad.addColorStop(1, 'rgba(255,255,255,0)'); ctx.strokeStyle = grad; ctx.lineWidth = 1.5*devicePixelRatio; ctx.beginPath(); ctx.moveTo(t.x, t.y); ctx.lineTo(t.x - t.vx*len, t.y - t.vy*len); ctx.stroke(); } requestAnimationFrame(draw); } requestAnimationFrame(draw); /* ---------- IndexedDB (no external lib) ---------- */ const DB_NAME = 'auto-repair-checklist'; const DB_STORE = 'progress'; let db; function idbOpen(){ return new Promise((resolve,reject)=>{ const req = indexedDB.open(DB_NAME, 1); req.onupgradeneeded = (e)=>{ const db = e.target.result; if(!db.objectStoreNames.contains(DB_STORE)){ db.createObjectStore(DB_STORE, { keyPath: 'id' }); } }; req.onsuccess = ()=>{ db=req.result; resolve(db); }; req.onerror = ()=>reject(req.error); }); } async function idbGet(id){ await idbOpen(); return new Promise((resolve,reject)=>{ const tx = db.transaction(DB_STORE,'readonly'); const store = tx.objectStore(DB_STORE); const req = store.get(id); req.onsuccess = ()=>resolve(req.result?.value); req.onerror = ()=>reject(req.error); }); } async function idbSet(id, value){ await idbOpen(); return new Promise((resolve,reject)=>{ const tx = db.transaction(DB_STORE,'readwrite'); tx.objectStore(DB_STORE).put({id, value}); tx.oncomplete=()=>resolve(true); tx.onerror=()=>reject(tx.error); }); } async function idbDel(id){ await idbOpen(); return new Promise((resolve,reject)=>{ const tx = db.transaction(DB_STORE,'readwrite'); tx.objectStore(DB_STORE).delete(id); tx.oncomplete=()=>resolve(true); tx.onerror=()=>reject(tx.error); }); } /* ---------- UI: render checklist ---------- */ const stepsEl = document.getElementById('steps'); const progressPctEl = document.getElementById('progressPct'); const progressCountEl = document.getElementById('progressCount'); const progressTotalEl = document.getElementById('progressTotal'); const statusMsg = document.getElementById('statusMsg'); function stepRow(step){ const container = document.createElement('div'); container.className = 'step'; container.innerHTML = ` <input type="checkbox" id="${step.id}"/> <div class="label"> <label for="${step.id}"><strong>${step.t}</strong></label> <div class="small">${step.d}</div> </div> `; return container; } async function hydrate(){ stepsEl.innerHTML=''; for(const s of CHECKLIST_STEPS){ stepsEl.appendChild(stepRow(s)); } progressTotalEl.textContent = CHECKLIST_STEPS.length; // load progress const saved = await idbGet('checklist') || {}; for(const s of CHECKLIST_STEPS){ const cb = document.getElementById(s.id); cb.checked = !!saved[s.id]; cb.addEventListener('change', onToggle); } updateProgress(); // load Habitica creds const creds = await idbGet('habiticaCreds'); if(creds){ document.getElementById('habiticaUser').value = creds.user || ''; document.getElementById('habiticaToken').value = creds.token || ''; } } function getState(){ const state = {}; for(const s of CHECKLIST_STEPS){ const cb = document.getElementById(s.id); state[s.id] = !!cb.checked; } return state; } async function onToggle(){ const state = getState(); await idbSet('checklist', state); updateProgress(); } function updateProgress(){ const state = getState(); const done = Object.values(state).filter(Boolean).length; const total = CHECKLIST_STEPS.length; const pct = Math.round(100*done/total); progressCountEl.textContent = done; progressTotalEl.textContent = total; progressPctEl.textContent = pct + '%'; } /* ---------- Export: Plain text ---------- */ document.getElementById('btnExportText').addEventListener('click', async ()=>{ const state = getState(); const lines = []; lines.push("Corruption-Proof Auto Repair Checklist"); lines.push("====================================="); lines.push(""); CHECKLIST_STEPS.forEach((s,i)=>{ lines.push(`[${state[s.id] ? 'x' : ' '}] ${i+1}. ${s.t} — ${s.d}`); }); const blob = new Blob([lines.join("\n")], {type:'text/plain;charset=utf-8'}); const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href = url; a.download = 'auto-repair-checklist.txt'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url); status('Exported .txt'); }); /* ---------- Print button ---------- */ document.getElementById('btnPrint').addEventListener('click', ()=>window.print()); /* ---------- Reset progress ---------- */ document.getElementById('btnReset').addEventListener('click', async ()=>{ await idbDel('checklist'); hydrate(); status('Progress reset'); }); function status(msg){ statusMsg.textContent = msg; setTimeout(()=>{ if(statusMsg.textContent===msg) statusMsg.textContent=''; }, 2500); } /* ---------- Habitica Integration ---------- */ const habiticaForm = document.getElementById('habiticaForm'); const habiticaSaveMsg = document.getElementById('habiticaSaveMsg'); habiticaForm.addEventListener('submit', async (e)=>{ e.preventDefault(); const user = document.getElementById('habiticaUser').value.trim(); const token = document.getElementById('habiticaToken').value.trim(); await idbSet('habiticaCreds', {user, token}); habiticaSaveMsg.textContent = 'Saved locally.'; setTimeout(()=>habiticaSaveMsg.textContent='', 2200); }); document.getElementById('btnExportHabitica').addEventListener('click', async ()=>{ const creds = await idbGet('habiticaCreds'); if(!creds || !creds.user || !creds.token){ alert('Enter and save your Habitica User ID and API Token first.'); return; } const state = getState(); // Build a single To-Do with a Habitica "checklist" of steps const checklist = CHECKLIST_STEPS.map((s,i)=>({ text: `${i+1}. ${s.t}`, completed: !!state[s.id] })); const body = { text: "Corruption-Proof Auto Repair Checklist", type: "todo", notes: "Generated by PRA checklist (offline-first). Edit or check items as you proceed.", checklist }; try{ const res = await fetch('https://habitica.com/api/v3/tasks/user', { method:'POST', headers:{ 'Content-Type':'application/json', 'x-api-user': creds.user, 'x-api-key': creds.token }, body: JSON.stringify(body) }); if(!res.ok){ const txt = await res.text(); throw new Error('Habitica API error: '+txt); } status('Pushed to Habitica ✔'); }catch(err){ console.error(err); alert('Failed to export to Habitica. Check credentials / network and try again.'); } }); /* ---------- Optional WebLLM hook ---------- */ const btnLLM = document.getElementById('btnLLM'); const llmPrompt = document.getElementById('llmPrompt'); const llmOut = document.getElementById('llmOut'); const llmStatus = document.getElementById('llmStatus'); function hasWebLLM(){ // Allow various integrations; minimal detection: return typeof window !== 'undefined' && (window.webllm || window.WebLLM || window.web_llm); } btnLLM.addEventListener('click', async ()=>{ const q = llmPrompt.value.trim(); if(!q){ llmOut.textContent = 'Ask something first.'; return; } if(!hasWebLLM()){ llmOut.textContent = "WebLLM not detected. Host a local build that exposes window.webllm and reload this page."; llmStatus.textContent = "Tip: Serve your WebLLM bundle locally, then open this file with a local web server (no CORS)."; return; } try{ llmStatus.textContent = "Thinking on-device…"; // Extremely generic API shim to support multiple builds: let answer = null; if(window.webllm?.chat){ // Hypothetical API answer = await window.webllm.chat([{role:"user", content:q}], {max_tokens:256}); answer = (typeof answer === 'string') ? answer : (answer?.content || JSON.stringify(answer)); } else if(window.WebLLM?.createEngine){ const engine = await window.WebLLM.createEngine({model:"qwen2.5:0.5b-in-browser"}); const res = await engine.chat.completions.create({ messages:[{role:"user", content:q}], temperature:0.2, max_tokens:256 }); answer = res?.choices?.[0]?.message?.content || "[no content]"; } else { answer = "WebLLM present but unknown API. Please adapt integration."; } llmOut.textContent = String(answer).trim(); llmStatus.textContent = ""; }catch(e){ console.error(e); llmOut.textContent = "WebLLM error. Check console."; llmStatus.textContent = ""; } }); /* ---------- Boot ---------- */ hydrate().catch(err=>console.error(err)); })(); </script> </body> </html> 